<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
</head>
<body>

<a-scene vr-mode-ui="enabled: false" embedded arjs>

    <a-marker type="pattern" url="patterns/pattern-marker.patt">
        <a-entity position="0 0 0" scale="0.02 0.02 0.02"
            obj-model="obj: url(/media/Earth.obj);"
            animation="property: rotation; dur: 6000; to: 0 720 0; loop: false; easing: linear; 
                       startEvents: markerFound;"
            animation__showPin="property: components.scale.scale; dur: 500; to: 0.3 0.3 0.3; 
                                startEvents: animationcomplete">

            <!-- Chiudi prima l'elemento a-entity del modello 3D -->
            <a-entity material="src: url(/media/Earth_Diffuse.jpeg);"></a-entity>

            <!-- Pin sul modello -->
            <a-image id="pin" src="/media/pin.png" position="0 1.2 0.3" scale="0"></a-image>

        </a-entity>
    </a-marker>

    <a-entity camera></a-entity>

</a-scene>

<script>
    // Funzione per far apparire il pin dopo il completamento della rotazione
    document.querySelector('a-marker').addEventListener('markerFound', function () {
        var model = document.querySelector('[obj-model]');
        model.emit('animationcomplete');
    });
</script>

</body>
</html>
